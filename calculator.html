<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculator</title>
  <link rel="stylesheet" href="./styles.css">
</head>

<body>
  <h1>Calculator - ToP</h1>

  <div class="calculadora">
    <div id="display"></div>
    <span class="teclado">
      <span class="teclado-main">
        <div id="f1">
          <button class="clear">C</button>
          <button class="dividir">/</button>
          <button class="multiplicar">* </button>
        </div>
        <div id="f2">
          <button class="7">7</button>
          <button class="8">8</button>
          <button class="9">9</button>
        </div>
        <div id="f3">
          <button class="4">4</button>
          <button class="5">5</button>
          <button class="6">6</button>
        </div>
        <div id="f4">
          <button class="1">1</button>
          <button class="2">2</button>
          <button class="3">3</button>
        </div>
        <div id="f5">
          <button class="borrar">&larr;</button>
          <button class="0">0</button>
          <button class="punto">.</button>
        </div>
      </span>
      <div id="right-column">
        <button class="menos">-</button>
        <button class="mas">+</button>
        <button class="equal">=</button>
      </div>
    </span>
  </div>







  <script>
    // Make the calculator work! You’ll need to store the first number that is input into the calculator when a user presses an operator, and also save which operation has been chosen and then operate() on them when the user presses the “=” key.

    //CREAR variable que almacene los numeros que se apretan en los botones. Puedo hacer que tome el valor de la CLASS
    //CREAR variable OPERADOR. Va a tomar el valor del BOTÓN OPERADOR APRETADO ("+", "-", "*", "/");
    //AL APRETAR un OPERADOR, los numeros ingresados se guardan en la variable num1, y los siguientes numeros apretados se almacenan
    //en la variable num2. AL MISMO TIEMPO, establecer el valor de la variable OPERADOR para que luego pueda ser usado por fn operate();
    //

    let numsArray = [];
    let prevNum = "";
    let operador = "";

    let display = document.getElementById('display');

    let buttons = Array.from(document.getElementsByTagName('button'));

    buttons.map(button => {
      button.addEventListener('click', (e) => {
        switch (e.target.innerText) {
          case 'C':
            numsArray = [];
            display.innerText = "";
            operador = "";
            break;
          case '←':
            display.innerText = display.innerText.slice(0, -1);
            break;
          case '/':
            operador = "/";
            numsArray.push(display.innerText)
            display.innerText = "";
            break;
          case '*':
            operador = "*";
            numsArray.push(display.innerText)
            display.innerText = "";
            break;
          case '-':
            operador = "-";
            numsArray.push(display.innerText)
            display.innerText = "";
            break;
          case '+':
            operador = "+"
            numsArray.push(display.innerText)
            display.innerText = "";
            break;

          case '=':    //que esto ejecute fnc que sea una fnc switch (operadores);
            try {
              numsArray.push(display.innerText);
              display.innerText = "";
              display.innerText = operate(operador)
              numsArray = [];
              // numsArray.push(display.innerText)
            } catch {
              display.innerText = "ERROR";
            }
            break;
          default:
            display.innerText += e.target.innerText;
        }
      })
    })

    //2) Create a new function operate that takes an operator and 2 numbers and then calls one of the above functions on the numbers.:
    function operate(op) {
      op = operador
      if (op == "+") {
        return sum(numsArray);
      }
      if (op == "-") {
        return subtract(numsArray);
      }
      if (op == "*") {
        return multiply(numsArray);
      }
      if (op == "/") {
        return divide(numsArray);
      }
      if (op == false) {
        return "Ingrese un operador válido";
      }
      return "Ingrese en forma de string un operador válido"
    }

    ////////////////////////////////
    const add = function (num1, num2) {
      return parseFloat(num1) + parseFloat(num2);
    };

    const subtract = function (...args) {
      let base = args[0][0]
      for (let i = 1; i < args[0].length; i++) {

        if (args[0][i]) {
          base -= parseFloat(args[0][i]);
        }
      }
      return base
    }


    const sum = function (...args) {
      let sum = 0;

      for (let i = 0; i < args[0].length; i++) {
        if (args[0][i]) {
          sum += parseFloat(args[0][i]);
        }
      }

      return sum;
    };

    const multiply = function (...args) {
      let sum = args[0][0];

      for (let i = 1; i < args[0].length; i++) {
        sum *= args[0][i];
      }

      return sum;
    };

    const divide = function (...args) {
      let sum = args[0][0];

      for (let i = 1; i < args[0].length; i++) {
        sum /= args[0][i];
      }

      return sum;

    }

    const power = function (base, exponent) {
      return Math.pow(base, exponent);
    };

    const factorial = function (n) {
      if (n === 0 || n === 1) {
        return 1;
      }
      let factorialSum = n;
      for (let i = n - 1; i >= 1; i--) {
        factorialSum *= i;
      }
      return factorialSum;
    };


  </script>

</body>

</html>